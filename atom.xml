<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Random Software Inklings]]></title>
  <link href="http://jkamenik.github.com/atom.xml" rel="self"/>
  <link href="http://jkamenik.github.com/"/>
  <updated>2012-11-10T10:25:01-05:00</updated>
  <id>http://jkamenik.github.com/</id>
  <author>
    <name><![CDATA[John T. Kamenik]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Problems with Agile Implementation]]></title>
    <link href="http://jkamenik.github.com/blog/2011/01/10/problems-with-agile-implementation/"/>
    <updated>2011-01-10T00:00:00-05:00</updated>
    <id>http://jkamenik.github.com/blog/2011/01/10/problems-with-agile-implementation</id>
    <content type="html"><![CDATA[<p>I really like agile programming. It keeps me close to the action, and makes me have to think about my next moves. It also keeps me informed as to what is going on around me. But in my many years of using agile I realize that, though the process itself is very nice, its implementations can tend not to be.</p>

<!--more-->


<p>Problem don&#8217;t arise from agile itself, but who and how it was implemented. If the implementer&#8217;s goals do not match the <a href="http://en.wikipedia.org/wiki/Agile_software_development">Agile Manifesto</a> there is little chance of success. I have used <a href="http://en.wikipedia.org/wiki/Scrum_(development)">scrum</a> many times and the most common problems I see are:</p>

<ol>
<li>Agile as Micromanagement</li>
<li>Agile as a Whip</li>
<li>Agile as an Excuse</li>
</ol>


<h3>Agile as Micromanagement</h3>

<h4>It looks like:</h4>

<ol>
<li>Having to break task down into hourly segments of work</li>
<li>Having to break task that logically have to be done by a single person</li>
<li>Having to account for ALL time taken, even time not related to code like attending meetings</li>
</ol>


<h4>Agile tenet misused:</h4>

<ol>
<li>Individuals and interactions over process and tools</li>
<li>Working software over comprehensive documentation</li>
</ol>


<p>This happens when a manager (<a href="http://en.wikipedia.org/wiki/Scrum_(development)#.E2.80.9CChicken.E2.80.9D_roles">chicken role</a>) is the Scrum Master or when the Product Owner has say over implementation specifics. It is a confusion of roles, which in turn leads to a confusion of goals, which in turn leads to over documentation.</p>

<h3>Agile as a Whip</h3>

<h4>It looks like:</h4>

<ol>
<li>Filtering a burn-down on an individual basis</li>
<li>Placing more in the sprint then can be done (but still requiring it all to be done)</li>
<li>Associating points with people (publicly)</li>
<li>Associating number of tasks done with effort</li>
<li>Associating points with hours</li>
<li>Basically anything where measured output is more important then people</li>
</ol>


<h4>Agile tenet misused:</h4>

<ol>
<li>Individuals and interactions over process and tools</li>
</ol>


<p>Anytime you associate numbers with people you have created a <a href="http://en.wikipedia.org/wiki/Crab_mentality">crab mentality</a>. Their focus will stop being on software, but on making their numbers better. Those that are better at number games will succeed, those that are better at software will fail.</p>

<p>Anytime you put your people under undo pressure then simple mistakes are made. This is going to later erode confidence in the team. It is going to happen like this: &#8220;you missed a comma in a Javascript file which causes it not to work in IE. That was such a simple mistake to have tested for that I am not sure you are testing any of your code.&#8221; The problem was caused by 4 hours of sleep in 72 hours of coding at the end of an over-extended sprint. The programmer was nearly delirious. It is shocking it was the only mistake, not that it was a simple mistake!</p>

<p>Unfortunately I have seen this situation start innocent enough, with comments like &#8220;we don&#8217;t want to over work the staff&#8221; or &#8220;we want to make sure they always have something to do&#8221; or &#8220;we want them working on the correct things&#8221;. If the &#8220;we&#8221; in question is management (<a href="http://en.wikipedia.org/wiki/Scrum_(development)#.E2.80.9CChicken.E2.80.9D_roles">chicken role</a>) then there is probably already micromanagement going on, and Agile is being used as whip to solve the problems created by the bad implementation.</p>

<h3>Agile as an Excuse.</h3>

<h4>It looks like:</h4>

<ol>
<li>&#8220;You said it would take XXX. It took YYY. You need to make up the difference out of your own time&#8221;</li>
<li>&#8220;We cannot slip these date, and you have already pared back the release N sprints ago. You need to put in extra effort&#8221;</li>
<li>&#8220;Agile is about being agile. Even though we are mid sprint we are radically changing direction, but we are not canceling the sprint or doing sprint planning. We are just swapping out some tasks for others.&#8221;</li>
<li>&#8220;You picked the language. It is now your problem to bring this project to conclusion and under budget.&#8221;</li>
</ol>


<h4>Agile tenet misused:</h4>

<ol>
<li>Individuals and interactions over process and tools</li>
<li>Responding to change over following a plan</li>
</ol>


<p>These are all excuses I have heard. Each time given by a person in <a href="http://en.wikipedia.org/wiki/Scrum_(development)#.E2.80.9CChicken.E2.80.9D_roles">chicken role</a> (managers) because they are ignoring changes in the field (military term). Every choice has a set of outcomes: some good, some bad. The attempt with agile is not to mitigate bad outcomes, but to allow those outcomes to contribute to the overall direction.</p>

<p>Sometimes the bad outcome will be that something took to long, or that one language/tool was not the correct choice given the problem set. If for every problem that happens the developer has to take their own time, or face embarrassment, to solve the problem then they will stop making choices. Not just choices that might have bad outcomes, but choices altogether. At which point someone in a <a href="http://en.wikipedia.org/wiki/Scrum_(development)#.E2.80.9CChicken.E2.80.9D_roles">chicken role</a> will start making more choices then they should.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JS Unit Testing using YUI]]></title>
    <link href="http://jkamenik.github.com/blog/2010/12/15/js-unit-testing-using-yui/"/>
    <updated>2010-12-15T00:00:00-05:00</updated>
    <id>http://jkamenik.github.com/blog/2010/12/15/js-unit-testing-using-yui</id>
    <content type="html"><![CDATA[<p>Ok, Selenium was a partial success that you can read about <a href="http://randomsoftwareinklings.blogspot.com/2010/11/learning-selenium.html">here</a>, but it really was harder then I wanted it to be and it required a lot of setup for only a little bit of testing. I noticed that a project that I use a lot ExtJS uses a modified version of YUI Test. So I converted my Selenium test example to YUI Test.</p>

<!-- more -->


<p>My initial impression was confusion because you have to download the entire YUI 2 suite just get to get the <a href="http://developer.yahoo.com/yui/yuitest/">test tools</a>. Also, when you download the entire suite they are many different copies of the same file in various stages of minification. But following the documentation I boiled down exactly what I needed and threw away the rest. I put all the code for my test <a href="https://github.com/jkamenik/yui-test-example">here</a> so you can follow along.</p>

<p>You will need the following files from the YUI archive:</p>

<ul>
<li>build/logger/assets/logger.css</li>
<li>build/logger/logger.js</li>
<li>build/yuiloader-dom-event/yuiloader-dom-event.js</li>
<li>build/yuitest/assets/testlogger.css</li>
<li>build/yuitest/yuitest.js</li>
</ul>


<p>Create an HTML file that includes the css and js files:</p>

<div><script src='https://gist.github.com/1151464.js?file=index-header.html'></script>
<noscript><pre><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;logger.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;testlogger.css&quot;&gt;

&lt;!-- Test runner code --&gt;
&lt;script src=&quot;yahoo-dom-event.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;logger.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;yuitest.js&quot;&gt;&lt;/script&gt;</code></pre></noscript></div>


<p>The HTML will also need to instantiate the test logger and run the test runner global. I bound the test run to a button so I could control when it ran:</p>

<div><script src='https://gist.github.com/1151464.js?file=index-body.html'></script>
<noscript><pre><code>&lt;body&gt;
    &lt;input onclick=&quot;javascript:runAllTests()&quot; type=&quot;button&quot; value=&quot;Run Tests&quot; /&gt;
    
    &lt;script&gt;
        new YAHOO.tool.TestLogger();
        
        function runAllTests(){
            YAHOO.tool.TestRunner.run();
        }
    &lt;/script&gt;
&lt;/body&gt;</code></pre></noscript></div>


<p>Now that we have a <code>YAHOO.tool.TestRunner</code> we need to add a test that can be run.  Instantiate a <code>new YAHOO.tool.TestCase</code> and add it to the TestRunner. All a TestCase needs is a name and a bunch of functions that start with &#8220;test&#8221;. Everything else is automatic. Below is a simplified version of the <a href="https://github.com/jkamenik/yui-test-example/blob/master/test.js">full file</a>.</p>

<div><script src='https://gist.github.com/1151464.js?file=test.js'></script>
<noscript><pre><code>var assert = YAHOO.util.Assert;

YAHOO.tool.TestRunner.add(new YAHOO.tool.TestCase({
  name: 'Tests for string',
  
  test_true: function(){
    var test = String(true);
    assert.isString(test);
    assert.areEqual('true',test);
  }
});</code></pre></noscript></div>


<h2>Conclusion</h2>

<p>Though Selenium is more automated that comes at the cost of being more complicated then testing should be. If I were a team of programmers then sure setting up and maintaining Selenium Remote controls would be a small part of the overall effort, but since I am not a team of programmers I think it is overkill.</p>

<p>What I really need is an easy to run, easy to write, repeatable, unit testing framework in JS. I do the leg work on pointing my various browsers at the html and reviewing the results. When things get big enough that I need to setup a continuous integration server, or I have a QA department, then I will give Selenium another go. For now YUI test is the way to go.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dealing with Email overload]]></title>
    <link href="http://jkamenik.github.com/blog/2010/12/12/dealing-with-email-overload/"/>
    <updated>2010-12-12T00:00:00-05:00</updated>
    <id>http://jkamenik.github.com/blog/2010/12/12/dealing-with-email-overload</id>
    <content type="html"><![CDATA[<p>This isn&#8217;t strictly software related, but a lot of us have to deal with the horror that is email. Email is not a good solution to any problem, but it is ubiquitous so it is used for all things: personal correspondence, commit tracking, defect notification, task notification, etc&#8230; Email is all to often used as a mechanism to pass-the-buck.</p>

<p>The only way to deal with this email overload is to set boundaries on email usage. A lot of people will find these boundaries annoying, if not unworkable. Just stick with it and lead by example. Eventually, in a time of high stress, you will be able to get to important messages fast and they will be left floundering.</p>

<!--more-->


<h2>My results</h2>

<p>I am putting the summary first in hopes that you might actually try some of these suggestions. On average I get 50 to 200 work related emails a day. In any given day (saturday and sunday included) I will need to respond to 5 to 10 of them. That means that I get between 40 and 195 junk emails that pass (and should pass) my junk mail filters.</p>

<p>By focusing on making sure my inbox only includes import emails I have reduced my inbox to 3 to 5 message each check (and I check twice a day). On busy days I only ever check my inbox, relying on others to contact me via a different medium if they really need me. When there is a less busy day I go through the other inbox and deal with those messages.</p>

<p>At the time I am writing this (on sunday) I have 1 email in my inbox and 91 emails in my other inbox that were all sent saturday. A quick read of the 1 email and I will have to spend 5 minutes reviewing code, but the rest can wait until monday.</p>

<h2>Use the right messaging system</h2>

<p>Use email for messages that do not need an immediate response. Since there is no message size limit, make sure you use the most of it. Write emails that are well detailed and specific. If at any point a message can be answered with &#8220;Ok&#8221; or some other monosyllabic word then email was not the correct choice.</p>

<p>Use Instant Messages (IM,IRC,etc&#8230;) for conversations that need semi immediate responses, and a possible record. Many IM packages can log conversations for later viewing, which is useful when you forget things. There are message length and formatting restrictions so this forces the messages to be brief and specific.</p>

<p>Use Phone, Skype, or face to face contact when a response is needed immediately.</p>

<p>Use Twitter, or some other global message posting service to track commits, continuous integration fails, defects, etc&#8230;</p>

<p>Use a wiki, or blog to track generic instructions or documentation.</p>

<h2>Check email twice a day (only)</h2>

<p>The easiest way to train people not to use email as a crutch is not use it as one yourself. Only check email twice a day, and give a concerted effort to reduce that to once a day within a month, and once a week within 6 months. Setup the other messaging systems so that email is used only for what it needs to be. And when people step out of line, correct them.</p>

<p>Email should not be the first thing that you check in the morning, as you should not be working out of email. It should also not be the last thing you check as it will disrupt your already stressful commute/home life. Instead check email 2 hours after the start of the day, and 2 hours before the end of the day. If you work a 9-to-5 that means once at 11am and once at 3pm.</p>

<p>The day you start doing this, tell the people that send you the most email and the ones that you will most affect by the change, and no one else. You are not trying to be sneaky, but if you blast an email to everyone then you are going to make it a big deal; which it is not. The others will learn over time.</p>

<p>When someone tells you that you need to check your email and read their message do it, but only check their email, ignore all other messages.</p>

<h2>Don&#8217;t use Inbox as an archive</h2>

<p>Once you are finished reading an email, either deal with the email and delete it or archive it. Create a separate archive folder and move emails there if you need to save them. Your goal is aways to reduce the inbox to zero</p>

<h2>Create an other inbox</h2>

<p>Create a filter that will dump any messages where you are not the direct recipient into a different folder. This should be the first filter you create, but the last filter that is applied to any message. Create as many other filters and folders as you can to move useless messages round. The goal is to remove any message that you do not need to act on so that what is left is just what is important. The trash can is a good folder to dump things that are truly useless.</p>

<h2>Use the server&#8217;s filtering mechanism</h2>

<p>When possible have server do all the filtering that way you can use multiple email clients and will not be dependent on leaving an email client on. All Exchange servers and many online email services can do server filtering. When using Outlook, be careful, the ease of creating filters is sometimes offset by the fact that it lies about what filters can be saved to the server. Though harder, since MS didn&#8217;t spend much time on the server-side features of Exchange, it is better to build the filters on the server directly.</p>

<h2>Reduce the inbox to zero (in one sitting)</h2>

<p>The goal is always to reduce your inbox to zero. Once all the filters are in place, the only thing left to actually deal with all the important emails (at least that is the hope). When dealing with email decide if the email should be dealt with, deferred, or archived.</p>

<p>If time is really an issue then find the messages to archive and defer first, and move them. That way what is left is just the stuff to deal with now.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to be a bad boss]]></title>
    <link href="http://jkamenik.github.com/blog/2010/12/05/how-to-be-bad-boss/"/>
    <updated>2010-12-05T00:00:00-05:00</updated>
    <id>http://jkamenik.github.com/blog/2010/12/05/how-to-be-bad-boss</id>
    <content type="html"><![CDATA[<p>Being a boss is a complicated thing. It is your job to get people to do things, sometimes things they do not want to do. And it is especially complicated in the software industry, where it is like herding cats.</p>

<p>I see a lot of posts on how to be a good boss, but the problem there is that they often forget to mention the things that can and will immediately erode any success you might have had. I am going to assume that as a reader you strive to be a person who others are willing to follow.</p>

<p>Nobody is perfect, so you will probably have done at least one of these things in the past. Or you do then without even knowing. Now is your chance to stop, and be a constructive boss who people want to work for.</p>

<!--more-->


<h2>Be smarmy</h2>

<p>Yep, this is number one.Smarmy people are falsely friendly (think used car dealers). Notice I did not say do not &#8220;be mean.&#8221; As a boss sometimes you will need to be mean, or at least not very nice.  And even that should be kept to a minimum, but it is never OK to be smarmy.  All it does is make people uncomfortable confiding in you, which means they will either find better employment (if they can) or they will sabotage you.</p>

<p>Here are some examples of what I mean by smarmy:</p>

<ul>
<li>Suggest that a problem can be solved by the employee working overtime</li>
<li>Using scrum (or any general meeting) to point out an employee&#8217;s failure</li>
<li>Joke about firing an employee</li>
<li>Make any sarcastic comment about an employee in the presence of others</li>
<li>Only talking to an employee when you need them to do something (i.e., I am only talking to you because I want something)</li>
</ul>


<p>Some ways to tell that you have already failed at this:</p>

<ul>
<li>All laughter stops when you enter the room</li>
<li>Conversations between you and an employee die quickly</li>
<li>Employees no longer tell you about issues they are having</li>
</ul>


<h2>Be a hypocrite</h2>

<p>A hypocrite is someone who says one thing and thinks or does another. It can be as overt as being prejudiced (racist, sexist, etc&#8230;) or as covert as being passive aggressive. Being a hypocrite is risky because when other people find out, you are just being deceitful, and no one wants to deal with that.</p>

<p>One example is saying that code needs to be high quality but not leaving time for testing. Overtly this often resembles explicitly adding a testing phase at the end of coding and then cutting it if coding goes long. Covertly this is often assuming that testing is done as part of coding, but scoffing at longer estimates. Speed and quality have a tenuous relationship. Something done slowly may or may not be of quality, but something quickly is almost never of quality.</p>

<p>The best way not to be a hypocrite is not to bring your values and prejudices into the equation. To do this though you have to understand what your values and prejudices are. In the case of the no testing, quality is explicitly stated as the important part, but speed is implicitly stated as the important factor. More specifically speed at the cost of quality is stated as the import factor. To avoid this, it is important to explicitly state the importance of all three tenets of the project triangle: that way you avoid the embarrassing case where one tenet goes to 0 unintentionally. See: <a href="http://en.wikipedia.org/wiki/Project_triangle">Project Triangle</a>.</p>

<h2>Be arrogant</h2>

<p>I am not talking about being hard headed or stubborn. I am talking about being truly arrogant. Stubborn people will listen to reason, assuming the opposing argument is good enough; arrogant people cannot be directly convinced. There are two forms of arrogance to watch out for: arrogance of idea, and arrogance of presenter. Arrogance of idea is simply dismissing an idea because it is in direct conflict with your internal ideas or values. Arrogance of presenter is rejecting an idea because of who presented it.</p>

<p>Two engineers approach you with different solutions to the problem of releasing on time: one says to keep the feature set and stop doing unit testing, and the other says reduce the feature set but keep the unit testing. Which do you choose? If you choose &#8220;keep the feature set&#8221; then you wrong. If you choose &#8220;keep the unit testing&#8221; you are also wrong. If you chose either (based on only the information provided) then the choice you made was based on you internal values only and not based on the problem being presented.</p>

<p>In the context of work the truth is that new hires probably know more about a given framework than you, and certainly will have a different perspective on how things should be done. They are probably offering you this knowledge, because they have already encountered the problem you are now seeing and have found an appropriate solution. It is tempting to dismiss this simply because a new hire presented it and they don&#8217;t know the full business impact of their suggestion. But ask yourself: if the system architect presented you with this idea would you accept it? If yes, then you are suffering from arrogance of presenter and should tread lightly.</p>

<p>I suggest instead that you judge an idea (never a presenter) on its merits in the context of only the problem (never on facts you assume to be true). And make sure you are consciously and actively judging the idea, and you are not adding your own problem or values.</p>

<h2>Offer post hoc rewards</h2>

<p>A post hoc reward is a reward given after work is complete. In physical work the effects of post hoc rewards are well known and lead to better results, but in knowledge work offering post hoc rewards has a distracting effect. Work will take longer and be of lower quality. It will make employees very good at performing work that maximizes their incentives, and not at developing a quality product. Be aware that offering reward for work done defines a tangible value for that work, which may demoralize an employee who feels under compensated as a result.</p>

<iframe width="560" height="315" src="http://www.youtube.com/embed/u6XAPnuFjJc" frameborder="0" allowfullscreen></iframe>


<p>Intrinsic rewards can and should be used. These are things that are given universally and without reservation. Basic examples would be vacation, and health benefits. Other examples would be a free day to work on any project the employee wanted, or free soda/tea/coffee. These intrinsic benefits help endear you and the company to the employee.</p>

<h2>Accept estimates less than 4 hours</h2>

<p>This may only be true in software, but tasks never take less than 4 hours. A task is really an atomic complete chunk of work, so to be considered complete it must be coded, tested, reviewed, and committed. However, some employees will claim they finish tasks sooner. Often these people are cutting corners (not testing, or not getting a review) or they are doing a bunch of tasks that should have logically been considered one task.</p>

<p>Either way they are playing a game with the numbers to get their counts higher, which means that you are probably rewarding over aggressive estimates, and have a huge defect backlog. Well done!</p>

<h2>Assume research is intrinsic</h2>

<p>I have seen this bite so many bosses, where they say something like &#8220;tasks cannot take longer then 4 days.&#8221; The problem is that now you have employees trying to split tasks that have little or no real research done. So when it comes time to implement you have a bunch of small tasks that are too small to warrant research, but no real clear direction because no real research was done.</p>

<p>Estimates of several weeks or months are fine early in the process. But enough time needs to be given to investigate feasibility prior to high level scoping. Prior to implementation, time should be given to research an implementation and split the tasks out. All of this time should have been blocked in as a single unit during high level scoping.</p>

<h2>Require meetings</h2>

<p>Meetings cost time and money. And in addition to the meeting itself there is time before the meeting where people ramp down, and time after the meeting when people need to ramp back up again. Both ramping phases are about 10 minutes each.</p>

<p>To monetize this for you, let&#8217;s say you have 12 employees going to a meeting, and on average they make $24 an hour, and the meeting is 15 minutes (a scrum). The total chunk of wasted time is 35 minutes or about $14 per employee. For the company that means you wasted $168. And that does not include any prep time employees had to take.</p>

<p>In general, meetings need to be kept to a minimum and kept on track because they will end up being the single most costly event both in terms of money and productivity.</p>

<h2>Watch your employees work</h2>

<p>Nobody is comfortable being scrutinized. Do not set up your office so that you are looking into your employees&#8217; cubes, and don&#8217;t wonder around aimlessly, and never under any circumstances hover. By doing this you are showing your employees that the most important thing is to look busy (a function of the keyboard and finger), not to solve problems (a function of the brain). At the point where your employees feel scrutinized they will work just hard enough to not get fired, and will partake in CYA games.</p>

<p>The best example is Office Space the movie. Little more needs to be said.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GIT with SVN]]></title>
    <link href="http://jkamenik.github.com/blog/2010/12/04/git-with-svn/"/>
    <updated>2010-12-04T00:00:00-05:00</updated>
    <id>http://jkamenik.github.com/blog/2010/12/04/git-with-svn</id>
    <content type="html"><![CDATA[<p>Normally, I would just use GIT without a bridge to another control system, but many companies use SVN.  There are just so many benefits to using GIT that, for me, I am going to use it if there is a bridge to repository type the company uses.  I certainly don&#8217;t hate SVN or CVS or Perforce, but GIT allows me to work the way that I know I am most productive; which is commit early, commit often.</p>

<p>What I mean by commit early, commit often is that I commit even if I only have part of the solution. As I find the other parts of the solution I commit those as well. That way when I am 2 or 3 days into a fix I already have the commit messages saved in GIT, so I don&#8217;t have to remember what I did for those 2 or 3 days. When the solution is shippable only then do I push it up to the company&#8217;s repository.</p>

<!--more-->


<h2>Benefits of GIT include:</h2>

<ol>
<li>Being able to share non production ready code (Peer to Peer)</li>
<li>Being able to have many local branches</li>
<li>Being able to logically group commits (via local branches) and push all at once</li>
<li>Fantastic branch switching/merging

<ol>
<li>Rarely will you ever have to fix a merge conflict yourself</li>
</ol>
</li>
<li>Rebase as well as merge

<ol>
<li>Rebase is SVNs style of linear commits</li>
<li>Merge is non-linear and tries to keep commits sequentially ordered by date.  So if two branches are merged and both were actively worked on then the commits are intermixed.  (makes a lot more sense in practice then in writing)</li>
</ol>
</li>
</ol>


<p>With GIT&#8217;s power comes a little bit more complexity, and here I will detail the method that I have developed over months of fits and starts.  That way you can experience the benefits of using GIT for day to day work, but still use SVN when dealing with corporate.</p>

<h2>Settings up the SVN Bridge</h2>

<p>You can have GIT manage an entire SVN repository, branches and all. However, for GIT to do this it must checkout every revision of the SVN repo. This can be very painful when there are a lot of commits. Instead I recommend only managing a single branch starting a specific revision near HEAD. You will lose history older then that revision, but it does save a lot of time for large SVN repositories.</p>

<p>For the below example I am going to assume we have a standard SVN repository at http://example.com/svn, the latest revision is 400, and the SVN username is test.</p>

<p>Find the latest revision of the repository:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>svn log http://example.com/svn/trunk | head
</span></code></pre></td></tr></table></div></figure>


<p>The latest revision will start with an &#8220;r&#8221; and be within the first 5 lines.</p>

<p>Setting up a git repo:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git svn init --username<span class="o">=</span><span class="nb">test </span>http://example.com/svn/trunk dev
</span><span class='line'>git svn fetch -r 400
</span></code></pre></td></tr></table></div></figure>


<p>Now you have a local GIT repo in dev that is synced to SVN trunk at revision 400. And when you <code>git svn dcommit</code> the user <code>test</code> will be used.</p>

<h2>Always work in a branch</h2>

<p>In my company before anything is allowed to be checked into SVN it must go through a peer review.  In any given day I might work on 2 or 3 bugs/tasks.  For each, I create a GIT branch with the bug/task ID and work there.  When I am done I use <code>git log -p</code> to list the diffs that I submit for review. Then I move on to the next item, while the fix is being reviewed.  When the first bug/task is reviewed and accepted I jump back to master, rebase it, jump to the branch, rebase master, jump back to master and merge the branch, and finally svn dcommit everything.  After I mark the bug/task complete I also delete the branch. If the code is not accepted then I still have a branch where I can make the required corrections and repeat the process.</p>

<p>It might sound complicated, but it really isn&#8217;t. The only reason for all this rebasing is so that GIT&#8217;s native merge tools deal with SVN merge conflicts. I am not sure why, but they are far better then what the SVN bridge can do, and will ultimately lead to few headaches for you.</p>

<p>In code it looks like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git&gt; git svn rebase
</span><span class='line'>git&gt; git checkout -b task1
</span><span class='line'>... work on task 1
</span><span class='line'>git&gt; git log -p -n X &gt; task1.diff
</span><span class='line'>... create diff of all <span class="o">(</span>X<span class="o">)</span> changes needed <span class="k">for </span>task1
</span><span class='line'>... email the diff <span class="k">for </span>review
</span><span class='line'>git&gt; git checkout master
</span><span class='line'>git&gt; git svn rebase
</span><span class='line'>git&gt; git checkout -b task2
</span><span class='line'>... work on task 2
</span><span class='line'>... when task 1 is approved commit what you have <span class="k">for </span>task 2 and dcommit task1
</span><span class='line'>... <span class="k">return </span>to task 2 when task 1 is committed
</span></code></pre></td></tr></table></div></figure>


<p>This style also works well if your boss comes over at the 11th hour and assigns you a new emergency assignment.  When you are done with the emergency switching gears is as easy as switching branches.</p>

<h2>DCommitting your changes</h2>

<p>As states above I use the checkout, rebase, checkout, rebase, checkout, merge, dcommit style.  This seems cumbersome until you understand the purpose.</p>

<p>From any branch always checkout into master.  This allows master to stay pure of your changes and makes its less likely that git svn will fail.</p>

<p>Once master is up-to-date checkout the branch again and rebase the master changes into the branch.  Fixing any rebase conflicts there might be.  By fixing them on the branch we keep master clean so we are using git&#8217;s rebase/merge capabilities, not the SVN bridge&#8217;s.  There are times this step can be skipped, but once you have to deal with your first rebase conflict from the bridge you will wish you had branched.</p>

<p>Now that the branch holds the latest code to be dcommitted to SVN: checkout master, merge the branch, and dcommit master.  You could rebase the changes from the branch if you prefer, it really makes no difference because your changes are on top of SVN now either way.  Once done all of master&#8217;s log messages will be rewritten to what is in SVN.</p>

<p>All together it looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git&gt; git checkout master
</span><span class='line'>git&gt; git svn rebase
</span><span class='line'>git&gt; git checkout task1
</span><span class='line'>git&gt; git rebase master
</span><span class='line'>... SVN needs your changes to be rebased so rebase master
</span><span class='line'>... by rebasing onto to a branch it is easier to deal with rebase failures
</span><span class='line'>... fix any rebase issues
</span><span class='line'>git&gt; git checkout master
</span><span class='line'>git&gt; git merge task1
</span><span class='line'>... could merge or rebase, doesn<span class="s1">&#39;t matter here</span>
</span><span class='line'><span class="s1">git&gt; git svn dcommit</span>
</span><span class='line'><span class="s1">... mark the task closed</span>
</span><span class='line'><span class="s1">git&gt; git brach -D task1</span>
</span><span class='line'><span class="s1">... svn doesn&#39;</span>t always mark the branch merged properly so use -D instead of -d
</span></code></pre></td></tr></table></div></figure>


<h2>Pro Tips</h2>

<h3>Different user names</h3>

<p>Use a different username for SVN and GIT.  That way it is easy to see in the log what is committed to SVN since the bridge will rewrite the commit log from what SVN says.</p>

<ul>
<li>For SVN I use jkamenik.</li>
<li>For GIT I use jkamenik at gmail dot com.</li>
</ul>


<p>Commits that are in SVN also have the SVN revision number in the log message, but I find it easier to use usernames since it is at the top of the log message.</p>

<h3>Setup Aliases</h3>

<p>Git allows more commands to be added via aliases. An alias can be a shortening of a git command: <code>st = status</code>. Or it can be a shell command that git will execute <code>test = !sh -c 'echo "it works!"'</code> (notice the leading !).</p>

<p>Here is the alias part of my <code>~/.gitconfig</code> file looks like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span><span class="nb">alias</span><span class="o">]</span>
</span><span class='line'>  <span class="c"># Old SVN aliases</span>
</span><span class='line'>  <span class="nv">ci</span> <span class="o">=</span> commit
</span><span class='line'>  <span class="nv">co</span> <span class="o">=</span> checkout
</span><span class='line'>  <span class="nv">st</span> <span class="o">=</span> status
</span><span class='line'>  <span class="nv">stat</span> <span class="o">=</span> status
</span><span class='line'>  <span class="c"># stuff I find useful</span>
</span><span class='line'>  <span class="nv">br</span> <span class="o">=</span> branch
</span><span class='line'>  <span class="nv">df</span> <span class="o">=</span> diff
</span><span class='line'>  rm-all <span class="o">=</span> !git st | grep deleted | awk <span class="s1">&#39;{print $3}&#39;</span> | xargs git rm
</span><span class='line'>  add-all <span class="o">=</span> !git st | grep modified | awk <span class="s1">&#39;{print $3}&#39;</span> | xargs git add
</span><span class='line'>  st-br <span class="o">=</span> <span class="s2">&quot;!f(){ git co master &amp;&amp; git svn rebase &amp;&amp; git co -b $1 }; `f`&quot;</span>
</span><span class='line'>  up-br <span class="o">=</span> <span class="s2">&quot;!f(){ git co master &amp;&amp; git svn rebase &amp;&amp; git co $1 }; `f`&quot;</span>
</span><span class='line'>  co-br <span class="o">=</span> <span class="s2">&quot;!f(){ git up-br $1 &amp;&amp; git co master &amp;&amp; git merge $1 &amp;&amp; git svn dcommit }; `f`&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice that <code>st-br</code>, <code>up-br</code>, and <code>co-br</code> are basically all the set of commands I noted above in single command style.</p>

<h3>Stashing changes</h3>

<p>The stash is a hidden place that git can keep changes that are not yet ready to commit.  This is very useful if you get switched to another task and really don&#8217;t have time to fully vet a change on the current task.  You can stash the outstanding change and later replay them.</p>

<p><code>git stash</code> keeps a queue of changes so you can stash more then one thing, but you can only replay them top down.</p>

<p>&#8220;` bash
git> git stash
&#8230; hides all modified files
git> git stash list
&#8230; lists all stashes
git> git stash apply
&#8230; applies the top stash, but does not remove it
git> git stash pop
&#8230; applies the top stash, and remove it</p>

<h2>Resources</h2>

<ul>
<li><a href="http://www.biostat.jhsph.edu/~rpeng/biostat776/workflow.html">GIT <-> SVN workflow</a></li>
<li><a href="http://www.viget.com/extend/effectively-using-git-with-subversion/">Effectively using GIT with SVN</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Learning Selenium]]></title>
    <link href="http://jkamenik.github.com/blog/2010/11/18/learning-selenium/"/>
    <updated>2010-11-18T00:00:00-05:00</updated>
    <id>http://jkamenik.github.com/blog/2010/11/18/learning-selenium</id>
    <content type="html"><![CDATA[<h2>Background</h2>

<p>My basic need is to find a platform where I can test FF, IE, and Safari on Windows, Linux, and OS X.  I use OS X as my platform, and Safari or Webkit as my environment.  I don&#8217;t like Windows or IE.  Linux is OK, but I like OS X because it just works the way I want.  And I find FF to be slow, and Firebug which is needed to debug we pages causes rendering changes and timing issues (most notably causing FF to crash).</p>

<!--more-->


<p>Ideally I want the testing environment:</p>

<ol>
<li>To be developed in Safari on OS X</li>
<li>To be able to test both internal libraries and rendered UI</li>
<li>To use unit tests to test internal libraries</li>
<li>To use interactive tests to test rendered UI</li>
<li>To use the unit/interactive tests as regression system moving forward</li>
<li>To write the tests once on my browser of choice</li>
<li>To run the tests on all combinations of browser and platform.</li>
<li>To not be bogged down by the testing framework</li>
<li>To be free, or very cheap</li>
</ol>


<p>From my research it looked like Selenium did basically exactly what I needed. And unfortunately was the only real option.  There were plenty of options for taking screen shots of public sites (which mine isn&#8217;t, yet) and comparing those between browsers.  And there are several options for unit testing javascript, but only Selenium did both and could be run on my own hardware.</p>

<h2>Implementation</h2>

<p>From my reading it looked like I wanted to use the IDE to create the tests, and remote controls to run the browsers.  Eventually I need to scale to Selenium Grid, but that is for later discussion.</p>

<h3>Test code</h3>

<p>This is the sample file that I created to test.</p>

<div><script src='https://gist.github.com/1151478.js?file=code.html'></script>
<noscript><pre><code>&lt;html&gt;
&lt;body&gt;
&lt;script&gt;
Namespace = {
  test: function(item){
    return item == true;
  }
};

function String(item){
  if(!item.push &amp;&amp; typeof(item) === 'object'){
    return item.name || '';
  }
  return ''+item; //yup this is faster then toString
}

function Int(item){
  return parseInt(item,10);
}

function Array(item){
  var type = typeof(item);

  if(type === 'string'){
    return item.split(&quot;\n&quot;);
  } else if(type === 'object'){
    if(item.push &amp;&amp; item.length &amp;&amp; item.concat){
      return item;
    }
  }
  return [item];
}
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre></noscript></div>


<h3>Using the IDE</h3>

<p>It took a long time to understand this tool, since I had no background in Selenium.  The basic premiss is that each file is a single test case, which is a set of tests.  Each test is a grouping of three items: the action, the target, and the expected result.  It natively creates a 3 column HTML table, which it can also run, but personal preference is that use the IDE to export the basic test into a different language.</p>

<p>I am a rails developer, and am familar with rspec so I use the IDE to run the tests to make sure they work, but then I transfer it to rspec since it is a more expressive test framework.  The downside is that you have to use a Remote Control to run the test, which adds an extra level of complications.  We will get to the Remote Control later.</p>

<p>A basic HTML test looks like this:</p>

<div><script src='https://gist.github.com/1151478.js?file=test.html'></script>
<noscript><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
&lt;head profile=&quot;http://selenium-ide.openqa.org/profiles/test-case&quot;&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
&lt;link rel=&quot;selenium.base&quot; href=&quot;file:///Users/jkamenik/Desktop/sel_test.html&quot; /&gt;
&lt;title&gt;Unit Testing&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table cellpadding=&quot;1&quot; cellspacing=&quot;1&quot; border=&quot;1&quot;&gt;
&lt;thead&gt;
&lt;tr&gt;&lt;td rowspan=&quot;1&quot; colspan=&quot;3&quot;&gt;Unit Testing&lt;/td&gt;&lt;/tr&gt;
&lt;/thead&gt;&lt;tbody&gt;
&lt;tr&gt;
 &lt;td&gt;open&lt;/td&gt;
 &lt;td&gt;file:///Users/jkamenik/Desktop/selenium/sel_test.html&lt;/td&gt;
 &lt;td&gt;test&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
 &lt;td&gt;verifyEval&lt;/td&gt;
 &lt;td&gt;this.browserbot.getUserWindow().Int(1)&lt;/td&gt;
 &lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
 &lt;td&gt;verifyEval&lt;/td&gt;
 &lt;td&gt;typeof(this.browserbot.getUserWindow().Int(1))&lt;/td&gt;
 &lt;td&gt;number&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre></noscript></div>


<p>There really is nothing more to it then that.  The one thing to note is that the test uses <code>verifyEval</code> which takes a JavaScript string.</p>

<blockquote><p>In all tests the <code>this</code> object is the base Selenium object so if you want to get to the <code>window</code> object you have to traverse up the stack via <code>this.browserbot.getUserWindow()</code>.</p></blockquote>




<blockquote><p>Unfortunately everything tested in Selenium is converted to a string before testing.  So if I need to ensure that an integer parsing function actually produces a number I need to use <code>typeof</code>.</p></blockquote>


<h2>Using RSpec</h2>

<p>The IDE is a great way to test scripts live, but for any programmer it is going to be easier to use a testing framework doing it programmatically.  As a rails guy I prefer RSpec so that is what I use.</p>

<h3>Installing</h3>

<p>This package requires ruby-gems, rspec, and selenium-client.  I am going to assume you have ruby-gems installed already.  The others are installed like this:</p>

<div><script src='https://gist.github.com/1151478.js?file=install.sh'></script>
<noscript><pre><code>sudo gem install rspec 
sudo gem install selenium-client</code></pre></noscript></div>


<h3>Converting</h3>

<p>When using Rspec the only real thing to remember is that there are no assert<em> or verify</em> methods.  The reason is that Rspec itself is a testing framework so it will have it own version of assert and verify (in this case should).</p>

<p>The IDE has a great feature in that it converts the HTML test into a rspec test for you.  It isn&#8217;t a great format, but it is better then nothing and is a good place to start.</p>

<div><script src='https://gist.github.com/1151478.js?file=selenium.rb'></script>
<noscript><pre><code>require &quot;rubygems&quot; 
gem &quot;rspec&quot; 
gem &quot;selenium-client&quot; 
require &quot;selenium/client&quot; 
require &quot;selenium/rspec/spec_helper&quot; 
require &quot;spec/test/unit&quot; 

describe &quot;array_test&quot; do 
attr_reader :selenium_driver 
alias :page :selenium_driver 

before(:all) do 
  @verification_errors = [] 
  @selenium_driver = Selenium::Client::Driver.new \ 
    :host =&gt; &quot;localhost&quot;, 
    :port =&gt; 4444, 
    :browser =&gt; &quot;*chrome&quot;, 
    :url =&gt; &quot;file:///Users/user/Desktop/selenium&quot;, 
    :timeout_in_second =&gt; 60 
end 

before(:each) do 
  @selenium_driver.start_new_browser_session 
end 

append_after(:each) do 
  @selenium_driver.close_current_browser_session 
  @verification_errors.should == [] 
end 

it &quot;test_array_test&quot; do 
  page.open &quot;file:///Users/jkamenik/Desktop/selenium/index.html&quot; 

  begin 
    (&quot;1&quot;).should == page.get_eval(&quot;this.browserbot.getUserWindow().Array([1])&quot;) 
  rescue ExpectationNotMetError 
    @verification_errors &lt;&lt; $! 
  end

  begin 
    (&quot;object&quot;).should == page.get_eval(&quot;typeof(this.browserbot.getUserWindow().Array(1))&quot;) 
  rescue ExpectationNotMetError 
    @verification_errors &lt;&lt; $! 
  end 
end 
end
</code></pre></noscript></div>




<blockquote><p>The browser being shown is <code>chrome</code>.  This actually means Firefox, not Google Chrome.  For Google Chrome use <code>googlechrome</code>.</p></blockquote>




<blockquote><p>For Safari use <code>safari</code>, but remember that you will need to disable the popup blocker manually and close Safari (for this user) otherwise it will just sit there forever.</p></blockquote>


<h3>Remote Controls</h3>

<p>A remote control is what Selenium uses to execute the test.  The IDE comes with it built-in, but it is tied to FireFox.  To use IE, Safari, or Chrome you need to download the remote control software: <a href="http://seleniumhq.org/projects/remote-control">http://seleniumhq.org/projects/remote-control</a>.  This software is just a Java server that opens your machine on port 4444 (by default) to allow Selenium clients to run tests.  Each client gets its own browser instance to run the tests in.</p>

<blockquote><p>The server must be run by a user that has access the browser and has a screen to render to.</p></blockquote>




<blockquote><p>Firefox will only run a single profile per user.  If you need to run Firefox concurrently on the same machine you need to fake a second profile.  Don&#8217;t do it, just create a VM; you will be happier.</p></blockquote>




<blockquote><p>Google Chrome does not works on OS X.  This is because OS X doesn&#8217;t add application executables to the path, and the server code isn&#8217;t smart enough to use the executable directly.  The fix is supposedly <a href="http://groups.google.com/group/selenium-users/browse_thread/thread/7205089285e92973?hide_quotes=no&amp;fwc=1">here</a>, but I was not able to get it to work.  If I do I will probably write another blog entry and link it here.</p></blockquote>


<h3>Putting it all together</h3>

<p>By default RSpec provides no runner code and the code the IDE produces is not standalone.  This is not a problem since installing RSpec into a rails app installs script/spec.  I have copied the runner code here so make it easier.</p>

<div><script src='https://gist.github.com/1151478.js?file=runner.rb'></script>
<noscript><pre><code>#!/usr/bin/env ruby 
if ARGV.any? {|arg| %w[--drb -X --generate-options -G --help -h --version -v].include?(arg)} 
  require 'rubygems' unless ENV['NO_RUBYGEMS'] 
end 
require 'spec/autorun' 
exit ::Spec::Runner::CommandLine.run</code></pre></noscript></div>


<p>I am going to assume the RSpec runner code is called spec and the test file is called test.rb.  To run this test from the command line do the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">ruby</span> <span class="n">spec</span> <span class="nb">test</span><span class="o">.</span><span class="n">rb</span>
</span></code></pre></td></tr></table></div></figure>


<p>Assuming you followed all the steps the test should have opened Firefox, executed a page, run the tests, closed Firefox, and returned the results.  Now you can add more tests and have Selenium execute them.</p>

<h2>Related Research</h2>

<ol>
<li>Using Selenium Grid</li>
<li>Using Chrome, or IE</li>
<li>Using a Grid to run the same test in all browsers on all OSs</li>
</ol>

]]></content>
  </entry>
  
</feed>
