---
layout: post
title: "Testing Rails in IE though Pow"
date: 2012-09-11
comments: false
---

<div class='post'>
<h2>My Setup</h2><br /><ol><li>A mac - because I need it to work the first time every time</li><li><a href="http://rubyonrails.org/">Rails</a></li><li><a href="https://rvm.io/">RVM</a> - because you should be using it</li><li>PostgreSQL - it is better then MySQL and actually easier to setup after you do it once.</li><li><a href="http://pow.cx/">Pow</a> - because it is small, spins up the rails server when you need it and the url looks like http://myhost.dev, not http://127.0.0.1:3000 (some browsers will attempt to look up "localhost" via google search, before asking DNS)</li><li>TDD</li><ol><li><a href="http://cukes.info/">Cucumber</a> - because it is easier to read integration level testing</li><li><a href="https://www.relishapp.com/rspec">Rspec</a> - because I like it (it both backs cucumber, and also us the unit testing for models and libraries)</li><li><a href="https://github.com/jnicklas/capybara">Capybara</a></li><li><a href="https://github.com/thoughtbot/capybara-webkit">Capybara-webkit</a> - so the browser is opened headless and doesn't intrupt other work</li></ol></ol><h2>My Problem</h2><div><ol><li>I can't test in IE (but the client wants it to work in IE 7 and IE 8)</li></ol><h2>My Solution</h2></div><div>First do everything as normal, since you will be developing faster and only at the END worry about IE. &nbsp;This is counter to a lot of thinking, but I have found that if you stick to good TDD and are testing using an actual opened browser then the only issue you will end up with are CSS related issues.</div><h3>Before you start</h3><div>Since it is likely that you will only have CSS issues it is a requirement that you make the main CSS work on HTML5&nbsp;compliant&nbsp;browsers. &nbsp;And add exceptions for the others.&nbsp;</div><blockquote class="tr_bq"><blockquote class="tr_bq">&lt;%= stylesheet_link_tag 'real' %&gt;&nbsp;</blockquote></blockquote><blockquote class="tr_bq"><blockquote class="tr_bq">&lt;!--[if IE]&gt;</blockquote><blockquote class="tr_bq">&lt;%= stylesheet_link_tag 'ie' %&gt;</blockquote><blockquote class="tr_bq">&lt;![endif]--&gt;</blockquote><blockquote class="tr_bq">&lt;!--[if IE 8]&gt;</blockquote><blockquote class="tr_bq">&lt;%= stylesheet_link_tag 'ie8' %&gt;</blockquote><blockquote class="tr_bq">&lt;![endif]--&gt;</blockquote><blockquote class="tr_bq">&lt;!--[if IE 7]&gt;</blockquote><blockquote class="tr_bq">&lt;%= stylesheet_link_tag 'ie7' %&gt;</blockquote><blockquote class="tr_bq">&lt;![endif]--&gt;</blockquote></blockquote><h3>Use a Windows VM</h3>Go to&nbsp;https://github.com/xdissent/ievms and install the various IE VMs. &nbsp;I have not had luck with IE6 and IE7, but IE8 works fine.<br /><blockquote class="tr_bq">curl -s <a href="https://raw.github.com/xdissent/ievms/master/ievms.sh">https://raw.github.com/xdissent/ievms/master/ievms.sh</a> | IEVMS_VERSIONS="8" bash</blockquote>If it fails, just keep rerunning it, or try a different version<br /><h4>Boot and wait for driver detection</h4>On first boot I usually go in as Admin and let windows detect everything and install all the needed components. &nbsp;This isn't a genuine version of windows so after 30 days you will be locked out, at which point you just need to revert to the "clean" snapshot.<br /><h4>Install the OS&nbsp;extensions</h4><div>For some reason the CD doesn't autoplay for me. &nbsp;Just enter "d:" in the Start Menu -&gt; Search and then select the installer.</div><h4>Add Fake DNS</h4><div>Pow munges DNS on the Mac so that you don't have to use "localhost". &nbsp;I actually really like this about Pow and so will remain using it. &nbsp;The only thing that you need to do is edit the windows Hosts file and add the Fake DNS there as well.</div><div><ol><li>Login as the IEUser</li><li>Start -&gt; Search -&gt; "Notepad"</li><li>Right click and select "Open as administrator"</li><li>File -&gt; Open</li><li>Change URL to&nbsp;"C:\WINDOWS\system32\drivers\etc\hosts"</li><li>Add the following (change the host names as you need)</li><ol><li>"10.0.2.2 &nbsp; &nbsp; &nbsp; myhost.dev"</li><li>"10.0.2.2 &nbsp; &nbsp; &nbsp; myhost1.dev"</li></ol><li>Now open http://myhost.dev in IE and it will work</li></ol><br /><blockquote class="tr_bq">&nbsp;</blockquote><blockquote class="tr_bq">&nbsp;</blockquote><blockquote class="tr_bq">&nbsp;</blockquote><blockquote class="tr_bq">&nbsp;</blockquote><blockquote class="tr_bq">&nbsp;</blockquote></div></div>
